<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>æŠ•èƒæŠ½å¡æ©Ÿ - Rebirth Card Machine</title>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <style>
    body {
      font-family: sans-serif;
      background: #f5f5f5;
      display: flex;
      flex-direction: column;
      align-items: center;
      margin: 0;
      padding: 0;
    }
    h1 {
      font-size: 2em;
      margin-top: 20px;
    }
    button {
      padding: 12px 24px;
      font-size: 1em;
      cursor: pointer;
      border: none;
      background: #007bff;
      color: white;
      border-radius: 6px;
      margin-top: 10px;
    }
    .card {
      margin-top: 20px;
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      max-width: 500px;
      text-align: center;
    }
    #map {
      height: 400px;
      width: 90%;
      max-width: 800px;
      margin-top: 30px;
      border: 2px solid #ccc;
      border-radius: 8px;
    }
  </style>
</head>
<body>
  <h1>ğŸŒ æŠ•èƒæŠ½å¡æ©Ÿ</h1>
  <button onclick="drawCard()">æŠ½å¡ï¼</button>
  <div class="card" id="result"></div>
  <div id="map"></div>

  <script>
    const countries = [
      { name: "ä¸­åœ‹", population: 1444216107, info: "æ“æœ‰é¾å¤§çš„å¸‚å ´èˆ‡å‹å‹•åŠ›ï¼Œä½†æ”¿æ²»èˆ‡äººæ¬Šè­°é¡Œå—åˆ°é—œæ³¨ã€‚", lat: 35.8617, lon: 104.1954 },
      { name: "å°åº¦", population: 1393409038, info: "å¹´è¼•äººå£å¤šï¼Œå°±æ¥­èˆ‡åŸºç¤å»ºè¨­é¢è‡¨æŒ‘æˆ°ã€‚", lat: 20.5937, lon: 78.9629 },
      { name: "ç¾åœ‹", population: 331893745, info: "é«˜ç”Ÿæ´»æ°´æº–ï¼Œè²§å¯Œå·®è·æ˜é¡¯ã€‚", lat: 37.0902, lon: -95.7129 },
      { name: "å°å°¼", population: 273523621, info: "å¤šå…ƒå®—æ•™èˆ‡æ°‘æ—çµ„æˆï¼Œç¶“æ¿Ÿç™¼å±•ä¸­ã€‚", lat: -0.7893, lon: 113.9213 },
      { name: "å·´è¥¿", population: 212559409, info: "è³‡æºè±å¯Œä½†æ²»å®‰èˆ‡è²§çª®å•é¡Œåš´é‡ã€‚", lat: -14.2350, lon: -51.9253 },
      { name: "å¥ˆåŠåˆ©äº", population: 206139587, info: "éæ´²äººå£æœ€å¤šåœ‹å®¶ï¼Œç™¼å±•æ½›åŠ›é«˜ä½†æŒ‘æˆ°ä¹Ÿå¤šã€‚", lat: 9.0820, lon: 8.6753 },
      { name: "å­ŸåŠ æ‹‰", population: 164689383, info: "å¯†åº¦é«˜ï¼Œæœè£å·¥æ¥­ç™¼é”ä½†è²§å›°å•é¡Œåš´é‡ã€‚", lat: 23.6850, lon: 90.3563 },
      { name: "ä¿„ç¾…æ–¯", population: 145912025, info: "è³‡æºè±å¯Œï¼Œåœ°ç†å»£å¤§ï¼Œä½†ç¶“æ¿Ÿèˆ‡æ”¿æ²»å±€å‹¢ä¸ç©©ã€‚", lat: 61.5240, lon: 105.3188 },
      { name: "å¢¨è¥¿å“¥", population: 128932753, info: "æ–‡åŒ–è±å¯Œã€æ²»å®‰ç‚ºä¸»æŒ‘æˆ°ã€‚", lat: 23.6345, lon: -102.5528 },
      { name: "æ—¥æœ¬", population: 126476458, info: "é«˜é½¡åŒ–åš´é‡ï¼Œç§‘æŠ€ç™¼é”ï¼Œç”Ÿæ´»å“è³ªé«˜ã€‚", lat: 36.2048, lon: 138.2529 },
      { name: "å°ç£", population: 23800000, info: "é†«ç™‚èˆ‡æ•™è‚²æ™®åŠï¼Œæ°‘ä¸»è‡ªç”±ï¼Œç”Ÿæ´»å“è³ªè‰¯å¥½ã€‚", lat: 23.6978, lon: 120.9605 },
      { name: "å¾·åœ‹", population: 83190556, info: "æ­æ´²ç¶“æ¿Ÿé¾é ­ï¼Œåˆ¶åº¦å¥å…¨ï¼Œç”Ÿæ´»æ°´æº–é«˜ã€‚", lat: 51.1657, lon: 10.4515 },
      { name: "è‹±åœ‹", population: 68207116, info: "æ­·å²æ‚ ä¹…ï¼Œé†«ç™‚èˆ‡æ•™è‚²å®Œå–„ï¼Œç”Ÿæ´»å£“åŠ›è¼ƒé«˜ã€‚", lat: 55.3781, lon: -3.4360 },
      { name: "æ³•åœ‹", population: 65426179, info: "æ–‡åŒ–åº•è˜Šæ·±åšï¼Œç¤¾æœƒç¦åˆ©è‰¯å¥½ã€‚", lat: 46.2276, lon: 2.2137 },
      { name: "å—éŸ“", population: 51709098, info: "ç§‘æŠ€ç™¼å±•å¿«é€Ÿï¼Œç«¶çˆ­å£“åŠ›å¤§ã€‚", lat: 35.9078, lon: 127.7669 },
      { name: "åŠ æ‹¿å¤§", population: 38388419, info: "è‡ªç„¶ç’°å¢ƒå„ªç¾ï¼Œç¤¾æœƒåŒ…å®¹ï¼Œç¦åˆ©åˆ¶åº¦è‰¯å¥½ã€‚", lat: 56.1304, lon: -106.3468 },
      { name: "æ¾³æ´²", population: 26702452, info: "æ°£å€™å®œäººï¼Œç¤¾æœƒå®‰å®šï¼Œç§»æ°‘å‹å–„ã€‚", lat: -25.2744, lon: 133.7751 },
      { name: "ç¾©å¤§åˆ©", population: 58870762, info: "æ–‡åŒ–è—è¡“è±å¯Œï¼Œç”Ÿæ´»æ­¥èª¿æ…¢ä½†å¤±æ¥­ç‡è¼ƒé«˜ã€‚", lat: 41.8719, lon: 12.5674 },
      { name: "åŸƒåŠ", population: 109262178, info: "æ­·å²æ‚ ä¹…ï¼Œç¶“æ¿Ÿèˆ‡æ”¿æ²»è½‰å‹ä¸­ã€‚", lat: 26.8206, lon: 30.8025 },
      { name: "è¶Šå—", population: 98168829, info: "ç¶“æ¿Ÿå¿«é€Ÿç™¼å±•ä¸­ï¼Œç”Ÿæ´»æˆæœ¬è¼ƒä½ã€‚", lat: 14.0583, lon: 108.2772 }
    ];

    const totalPopulation = countries.reduce((sum, c) => sum + c.population, 0);
    let count = 0;
    let map, marker;

    function drawCard() {
      count++;
      const rand = Math.random();
      let cumulative = 0;
      let selected;
      for (let country of countries) {
        cumulative += country.population / totalPopulation;
        if (rand <= cumulative) {
          selected = country;
          break;
        }
      }
      document.getElementById("result").innerHTML = `
        <h2>ç¬¬ ${count} æ¬¡æŠ•èƒ</h2>
        <h3>ä½ å‡ºç”Ÿåœ¨ï¼š${selected.name}</h3>
        <p>ç•¶åœ°äººå£ï¼šç´„ ${(selected.population / 1000000).toFixed(1)} ç™¾è¬äºº</p>
        <p>ä½”å…¨çƒäººå£ ${(selected.population / totalPopulation * 100).toFixed(2)}%</p>
        <p><strong>ç”Ÿæ´»ç‹€æ³ï¼š</strong>${selected.info}</p>
      `;
      if (!map) {
        map = L.map('map').setView([selected.lat, selected.lon], 4);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
          attribution: '&copy; OpenStreetMap contributors'
        }).addTo(map);
        marker = L.marker([selected.lat, selected.lon]).addTo(map);
      } else {
        map.setView([selected.lat, selected.lon], 4);
        marker.setLatLng([selected.lat, selected.lon]);
      }
    }
  </script>
</body>
</html>
