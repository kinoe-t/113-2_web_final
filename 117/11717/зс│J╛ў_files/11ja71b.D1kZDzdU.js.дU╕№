import"./bygoogle.DMR_7j_d.js";import{r as v,E as _,q as C,x as b,c as S,b as k,s as E}from"./index.Gpwi46mP.js";import{o as $}from"./share-url.CQZQyZGw.js";import{p as D,h as m}from"./hue.DkIkj6Ba.js";import{a2 as A}from"./reactivity.esm-bundler.COM5uOUJ.js";import"./prf-down.CDOu_z94.js";import"./video.B-QSYGrS.js";import"./nav.VYcA9yt8.js";import"./client.DkzPJ4Cf.js";import"./11ja71b.CutMWMOz.js";import"./searchbar.D3ktqrR3.js";import"./client.lQn29b4Q.js";import"./howto.64bxAxQk.js";import"./client.AUtfh--e.js";import"./scroll.CpCQi0l_.js";import"./core.D5AB3B6v.js";function T(){import.meta.url,import("data:text/javascript,").catch(()=>1);async function*t(){}T.g=t}function L(t,i){if(!t)return;const e=document.getElementById(i)||document.createElement("iframe");e.id=i,e.src=t,document.body.appendChild(e)}function I(){if(!__DATA__.isBot){const{id:t,type:i}=o;v.get("/api/statistics/view",{id:t,type:i}),i=="1"?v.get("/api/statistics/detail-out-view",{id:t}):i=="5"&&D("font_detail",1,"come")}}const o=window._getDetailData(),y=A({spin:!1}),g=()=>{y.spin=!1},w=t=>{g(),t&&window.open(t,"_blank")},R=()=>{C("rbg_id_type","".concat(o.id,"_").concat(o.type),{domain:".pngtree.com",expires:1}),w("/remove-background")},q={png:"down-btnfreepng",rar:"down-btnfreerar",ppt:"down-btnfreerar",premium:"down-btnvippng",edit:"down-btnedit",freevideo:"down-btnfreevideo"};function B(t,i,e,n){if(!t||y.spin)return;const s=o.one>0||o.limitedTime,a=()=>{if(__DATA__.enterpriseStatus==1)return;const f=+o.vipType;if(!s&&f>0){const r=__DATA__.vipType<=0;if(r||!r&&f==2)return g(),n.dialog="upgrade-premium",!0}};if(!__DATA__.isLogined){_.emit("_pri6n4"),m("down-btnnologin-"+t);return}if(t==="remove-bg"){a()||(m("detail/ai-btn-remove-bg"),R());return}switch(y.spin=!0,m(q[t]),t){case"png":case"rar":case"ppt":case"twibbon":const f=t==="png";i&&s?w(i):_.emit("_amemn8","*",{onend:g,type:o.type,btnType:t,licenseType:o.vipType||0,href:i,downUrl:i,rarName:e||"PSD",fee:o.fee&&f});break;case"edit":i&&o.editips&&confirm(o.editips)&&(i=i.replace(/\/canvas\/?\?/,"/canvas/designer.html?")),a()||w(i);break;case"freevideo":L(i,"down_ifr"),g();break;default:t==="premium"&&__DATA__.cookieLang!=="cht"?_.emit("_amemn8","plans",{onend:g,type:o.type}):w(i);break}}b("_1r0qupz",t=>({tab:t.tab,prfLoading:!1,tabCls(i){return this.tab===i?"_c5516n":""},onTab(i){this.tab=i},licPrf(i){const e=this.$app;if(!e.tapLogin())return;const n=i==="enterprise",s=n?"team":"",a=o.one>0,{vipType:f,enterpriseStatus:r}=__DATA__,c=n?r!=1:f<=0;if(!a&&c)e.onDialog(n?"_5j84hy":"_1mbqn4s"),m("prfview-btn"+s);else if(!this.prfLoading){this.prfLoading=!0;const l=this._Refs.prfDown,p=()=>{this.prfLoading=!1};l.onshow({...l.getName(o.one,i),slidesdocs:!!o.slidesdocs,data:{action:"detail",id:o.id,type:o.type},resolve:p,reject:p}),m("prfdown-btn"+s)}}}));b("_1um5rr9",t=>({url:t.url,followed:t.is,loading:!1,onFollow(){const i=this.$app;!this.loading&&i.tapLogin()&&(this.loading=!0,v.post("/api/async/designer-follow",{id:t.uid}).then(e=>{this.loading=!1,e.status===200&&(this.followed=!this.followed)}).catch(()=>{this.loading=!1}))}}));b("_166ljwa",t=>{const i="_sstrbf";return{store:y,previewSpin:!1,videoSize:"",wordsExpand:t.is2xl,wordsCount:"+10",wordsFromCls:t.is2xl?"":i,get showVideoDown(){return this.videoSize==="down"},"on:mounted"(){const e=this._Refs.hangs;e&&e.setIds(o.id,o.type),this.wordsCalc(!0),I()},wordsMinHeight(e){e.style.height="38px",e.style.overflow="hidden"},wordsOnExpand(){if(this.wordsFromCls=i,this.wordsExpand=!this.wordsExpand,this.wordsExpand){const e=this.$refs.wordsbtn,n=e&&e.parentElement;if(!n)return;n.appendChild(e)}else setTimeout(()=>{this.wordsCalc()},200)},wordsCalc(e){if(window.innerWidth<1024)return;const n=this.$refs.wordsbtn,s=n&&n.parentElement;if(!s)return;const a=()=>{n.classList.remove("_1i3kt2s")};if(e&&t.is2xl){a();return}const f=s.children,r=f.length,c=f[r-1];if(r<=1||c&&c.offsetTop<=0)return;const l=(p,h)=>{if(this.wordsCount="+"+(r-1-h),s.insertBefore(n,p),n.offsetTop>0){const x="previousElementSibling";let u=n[x];for(;u&&u.offsetTop>0;)u=u[x];u&&l(u,h-1)}else s._btn=p,s._btni=h;a()};if(s._btn){l(s._btn,s._btni);return}for(let p=0;p<r;p++){const h=f[p];if(h.offsetTop>0){l(h,p);break}}},onDownld(e,n,s){B(e,n,s,this.$app)},mDownld(){E(40,{target:document.querySelector("._bvrn6v")})},onCopy(){},onPreview(e=!1){if(e){const c=this.$element.querySelector("._bvrn6v .downld-btn-edit");if(c){k.dispatch(c,"click");return}}if(this.previewSpin)return;const n=this.$refs.imgLink,s=this.$refs.image;if(!n||!s)return;const a=n.href||s.currentSrc||s.src;if(!a)return;const f=()=>{_.emit("_kuxk9d",{src:a,width:n._nw,height:n._nh}),this.previewSpin=!1};if(this.previewSpin=!0,setTimeout(()=>{m("detail-preview-image")},80),n._nw){f();return}const r=new Image;r.onload=()=>{n._nw=r.naturalWidth,n._nh=r.naturalHeight,f()},r.onabort=r.onerror=()=>{this.previewSpin=!1,$toast.error("Load failed!")},r.decoding="async",r.src=a},likeSpin(){const e=this._Refs.hangs;return e?e.likeSpin({id:o.id,type:o.type}):""},likeCls(){const e=this._Refs.hangs;return e?e.likeIcoCls({id:o.id,type:o.type}):""},onLike(){const e=this._Refs.hangs;e&&e.onLike(o.id,o.type)},urlCopying:!1,onShareUrl(){S(location.href).then(()=>(this.urlCopying=!0,this.$nextTick())).then(()=>{setTimeout(()=>{this.urlCopying=!1},2800)})},onShare(e){const n=this.$refs.image,s=n?n.currentSrc||n.src:W(o.shareimg);$({name:e,media:s,title:o.sharetit,word:o.shareword})},how2Attri(){const e=this._Refs.howToAttribute,n=this.$refs.lionName;e.onopen({type:o.type,url:location.pathname,usrName:n&&n.textContent||""})}}});function W(t){return/^https?:\/\//.test(t)?t:"https://png.pngtree.com"+t}const z=t=>t*(96/72);b("_e05maq",t=>({text:"",pt:t.pt,effectId:t.eid,loading:!1,get textCls(){return"effects-text"+this.effectId},get textStyl(){return"--font-size:".concat(z(this.pt),"px")},get fontText(){return this.text||t.p},ptCls(i){return this.pt===i?"_4x0icu":"_1t7gxnv"},ptClick(i){this.pt=i},effectCls(i){return this.effectId===i?"_1abob5y":"_oqy7bn"},effectClick(i){this.effectId=i},"on:mounted"(){F(),this.initCanvas()},initCanvas(){},downPng(){if(this.loading)return;if(this.$app.tapLogin()){const e=this.fontText.trim();if(!e)return;this.loading=!0;const n=()=>{this.loading=!1},s=this.$refs.spanTxt,a=s&&s.parentElement;if(!a)return;const f=this.$refs.canvas,r=getComputedStyle(s);_.emit("_h3jjzr",{styles:{left:s.offsetLeft,top:s.offsetTop+1.25,fontFamily:r.fontFamily,fontSize:parseInt(r.fontSize),fontWeight:r.fontWeight,fontStyle:r.fontStyle},effectId:this.effectId,text:e,textWidth:s.offsetWidth,canvasWidth:a.offsetWidth,canvasHeight:a.offsetHeight,cid:f.id,onok:n,onerr(){n(),$toast.error("Error!")}})}}}));function F(){const t=document.querySelector("style[data-font-style]");if(t&&t.sheet){const i=t.sheet.cssRules,e=i.length;for(let n=0;n<e;n++)P(i[n].cssText);t.parentElement.removeChild(t)}}let d;function P(t){d||(d=document.createElement("style"),document.head.appendChild(d),d.appendChild(document.createTextNode(""))),d.sheet&&d.sheet.insertRule(t,d.sheet.cssRules.length)}export{T as __vite_legacy_guard};
